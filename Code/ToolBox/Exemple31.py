#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Wed May 19 14:06:59 2021

@author: Calic Petar
"""

import time
import mdptoolbox
import numpy as np

P = np.array(( ((0,0.6,0.4,0,0,0,0,0,0),(0,1,0,0,0,0,0,0,0),(0,0,1,0,0,0,0,0,0),(0,0,0,1,0,0,0,0,0),(0,0,0,0,1,0,0,0,0),(0,0,0,0,0,1,0,0,0),(0,0,0,0,0,0,1,0,0),(0,0,0,0,0,0,0,1,0),(0,0,0,0,0,0,0,0,1)),((0,0,0,0.3,0.5,0.2,0,0,0),(0,1,0,0,0,0,0,0,0),(0,0,1,0,0,0,0,0,0),(0,0,0,1,0,0,0,0,0),(0,0,0,0,1,0,0,0,0),(0,0,0,0,0,1,0,0,0),(0,0,0,0,0,0,1,0,0),(0,0,0,0,0,0,0,1,0),(0,0,0,0,0,0,0,0,1)),((0,0,0,0,0,0,0.15,0.85,0),(0,1,0,0,0,0,0,0,0),(0,0,1,0,0,0,0,0,0),(0,0,0,1,0,0,0,0,0),(0,0,0,0,1,0,0,0,0),(0,0,0,0,0,1,0,0,0),(0,0,0,0,0,0,1,0,0),(0,0,0,0,0,0,0,1,0),(0,0,0,0,0,0,0,0,1)),((1,0,0,0,0,0,0,0,0),(1,0,0,0,0,0,0,0,0),(0,0,1,0,0,0,0,0,0),(0,0,0,1,0,0,0,0,0),(0,0,0,0,1,0,0,0,0),(0,0,0,0,0,1,0,0,0),(0,0,0,0,0,0,1,0,0),(1,0,0,0,0,0,0,0,0),(0,0,0,0,0,0,0,0,1)),((1,0,0,0,0,0,0,0,0),(0,0,0,0,0,0,0,0,1),(0,0,0,0,0,0,0,0,1),(0,0,0,1,0,0,0,0,0),(0,0,0,0,1,0,0,0,0),(0,0,0,0,0,1,0,0,0),(0,0,0,0,0,0,1,0,0),(0,0,0,0,0,0,0,1,0),(0,0,0,0,0,0,0,0,1)),((1,0,0,0,0,0,0,0,0),(0,1,0,0,0,0,0,0,0),(0,0,1,0,0,0,0,0,0),(0,0,0,0,0,0,0,0,1),(0,0,0,0,0,0,0,0,1),(0,0,0,0,0,0,0,0,1),(0,0,0,0,0,0,1,0,0),(0,0,0,0,0,0,0,1,0),(0,0,0,0,0,0,0,0,1)),((1,0,0,0,0,0,0,0,0),(0,1,0,0,0,0,0,0,0),(0,0,1,0,0,0,0,0,0),(0,0,0,1,0,0,0,0,0),(0,0,0,0,1,0,0,0,0),(0,0,0,0,0,1,0,0,0),(0,0,0,0,0,0,0,0,1),(0,0,0,0,0,0,0,1,0),(0,0,0,0,0,0,0,0,1)),((1,0,0,0,0,0,0,0,0),(0,1,0,0,0,0,0,0,0),(0,0,1,0,0,0,0,0,0),(0,0,0,1,0,0,0,0,0),(0,0,0,0,1,0,0,0,0),(0,0,0,0,0,1,0,0,0),(0,0,0,0,0,0,1,0,0),(0,0,0,0,0,0,1,0,0),(0,0,0,0,0,0,0,0,1)) ))
pen = 100000

R = np.array(( ((15, 10, 5, pen,pen,pen,pen,pen),(pen, pen, pen, 10,30,pen,pen,pen), (pen, pen, pen, pen,15,pen,pen,pen), (pen, pen, pen, pen,pen,10,pen,pen),  (pen, pen, pen, pen,pen,20,pen,pen),(pen, pen, pen, pen,pen,60,pen,pen),(pen, pen, pen, pen,pen,pen,5,pen), (pen, pen, pen, 5,pen,pen,pen,15),(pen, pen, pen, pen,0,pen,pen,0)) ))  
print(P)
print(R)
Pm = P*-1
Rm = R*-1

start_time = time.time()
vi = mdptoolbox.mdp.ValueIteration(P, Rm,1,0.0001,1000)
print("temps de modélisation--- %s seconds ---" % (time.time() - start_time))
start_time = time.time()
vi.run()
print("--- %s seconds ---" % (time.time() - start_time))

print(vi.policy)
print(vi.V)
print("nombre d itérations:",vi.iter)
